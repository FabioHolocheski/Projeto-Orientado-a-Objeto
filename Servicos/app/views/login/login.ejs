
<html>
    <head>
		<meta charset="UTF-8">

		<title>Portal de Serviços</title>
		
		<!-- JQuery -->
		<script src="js/jquery-2.2.1.js"></script>

		<!-- bootstrap - link cdn -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
	
		<!-- incluindo css -->
		<link href="css/style.css" rel="stylesheet">

		<!-- favicon -->
        <link rel="shortcut icon" href="images/favicon.ico" />
        
        <script src="https://www.gstatic.com/firebasejs/5.0.3/firebase.js"></script>
	</head>

    

    <body>

            
            

        <h1 class="text-center">Autenticação</h1>

        <div class="col-md-4">
                     
            <br>
            <form id="formDeSubmit" accept-charset="UTF-8" role="form" class="form-signin" action="/home" method="post">
               
               <fieldset>
                
                    <label class="panel-login">E-mail</label>
                    <input type="text" class="form-control" id="emailInput" name="emailInput" placeholder="E-mail">
                    <br>
                    <label class="panel-login">Senha</label>
                    <input type="password" class="form-control" id="passwordInput" name="passwordInput" placeholder="Senha">
                   
            </fieldset>
        </form>

            
        <button class="btn btn-lg btn-block btn-primary" id="authEmailPassButton">Autenticar</button><br>
        <button class="btn btn-lg btn-block btn-primary" id="createUserButton">Criar nova conta</button><br>
        <button class="btn btn-lg btn-block btn-primary" id="authGoogleButton">Autenticar com Gmail</button>
            
            <br>
            <p class="text-center">
                    <button class="btn btn-lg btn-block btn-block " id="logOutButton">Sair</button>
            </p>
           
        </div>

    
    





        <script src="authentication.js">
       
        </script>
    <script src="http://code.jquery.com/jquery-2.2.4.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    

    

    

    
    </body>
    

<script>

// Initialize Firebase
var config = {
    apiKey: "AIzaSyAShnQsNUa53pnxpdTEzCjn6-fb-4nfCls",
    authDomain: "autenticacaoservico.firebaseapp.com",
    databaseURL: "https://autenticacaoservico.firebaseio.com",
    projectId: "autenticacaoservico",
    storageBucket: "autenticacaoservico.appspot.com",
    messagingSenderId: "322185229541"
  };
  firebase.initializeApp(config);

</script>



<script>

var authEmailPassButton = document.getElementById('authEmailPassButton');
var createUserButton = document.getElementById('createUserButton');
var logOutButton = document.getElementById('logOutButton');
var authGmailButton = document.getElementById('authGmailButton');

var emailInput = document.getElementById('emailInput');
var passwordInput = document.getElementById('passwordInput');


var displayName = document.getElementById('displayName');
var NameLogin = document.getElementById('NameLogin');




createUserButton.addEventListener('click', function(){
    firebase
        .auth()
        .createUserWithEmailAndPassword(emailInput.value, passwordInput.value)
        .then(function(){
            alert('Bem vindo' + emailInput.value);
        })
        .catch(function(error){
            console.error(error.code);
            console.error(error.message);
            alert('Falha ao cadastrar');
        });

});



authEmailPassButton.addEventListener('click', function(){   
    firebase
        .auth()
        .signInWithEmailAndPassword(emailInput.value, passwordInput.value)
        .then(function(result){
            console.log(result);
           
           alert('Autenticado ' + emailInput.value);
           document.getElementById("formDeSubmit").submit();
            
           
        })
        .catch(function(error){
            console.error(error.code);
            console.error(error.message);
            alert('Falha ao autenticar');
        });
});






logOutButton.addEventListener('click', function () {
    firebase
        .auth()
        .signOut()
        .then(function () {
            
            alert('Você se deslogou');
        }, function (error) {
            console.error(error);
        });
});


authGoogleButton.addEventListener('click', function () {
    // Providers
    var provider = new firebase.auth.GoogleAuthProvider();
    signIn(provider);
   
});

function signIn(provider) {
    firebase.auth()
        .signInWithPopup(provider)
        .then(function (result) {
            console.log(result);
            var token = result.credential.accessToken;
            
            document.getElementById("formDeSubmit").submit();
            
        }).catch(function (error) {
            console.log(error);
            alert('Falha na autenticação');
        });
}
</script>


</html>